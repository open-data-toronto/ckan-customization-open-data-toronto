{% ckan_extends %}

{% block package_basic_fields_custom %}
  {% set dataset_categories = ["Document", "Map", "Table", "Website"] %}
  {% set refresh_rates = ["Real-time", "Daily", "Weekly", "Monthly", "Quarterly", "Semi-annually", "Annually", "As available"] %}
  {% set owner_divisions = ["311 Toronto", "Accounting Services", "Affordable Housing Office", "Chief Resilience Office", "Children's Services", "City Clerk's Office", "City Manager's Office", "City Planning", "Civic Innovation Office", "Corporate Finance", "Corporate Security", "Court Services", "Economic Development & Culture", "Employment & Social Services", "Engineering & Construction Services", "Environment & Energy", "Equity, Diversity & Human Rights", "Executive Management", "Facilities Management", "Finance & Administration", "Financial Planning", "Fire Services", "Fleet Services", "Human Resources", "Indigenous Affairs Office", "Information & Technology", "Internal Audit", "Legal Services", "Long-Term Care Homes & Services", "Major Capital Infrastructure Coordination Office", "Municipal Licensing & Standards", "Office of Emergency Management", "Parks, Forestry & Recreation", "Pension, Payroll & Employee Benefits", "Policy, Planning, Finance & Administration", "Purchasing & Materials Management", "Real Estate Services", "Revenue Services", "Shelter, Support & Housing Administration", "Social Development, Finance & Administration", "Solid Waste Management Services", "Strategic & Corporate Policy", "Strategic Communications", "Toronto Building", "Toronto Office of Partnerships", "Toronto Paramedic Services", "Toronto Water", "Transformation Office", "Transportation Services", "Waterfront Secretariat", "CreateTO", "Exhibition Place", "Heritage Toronto", "TO Live", "Toronto Atmospheric Fund", "Toronto Investment Board", "Toronto Parking Authority", "Toronto Police Service", "Toronto Public Health", "Toronto Public Library", "Toronto & Region Conservation Authority", "Toronto Transit Commission", "Toronto Zoo", "Yonge-Dundas Square"] %}

  <hr/>
  <h2 class="text-info">General Information</h2>

  <div class="form-group control-medium">
    <label class="control-label" for="field-dataset_category"><span class="text-danger">* </span>Dataset Category</label>
    <div class="controls">
      <select id="field-dataset_category" name="dataset_category" data-module="autocomplete">
        {% for dataset_category in dataset_categories %}
          <option value="{{ dataset_category }}" {% if dataset_category in data.get('dataset_category', []) %}selected="selected"{% endif %}>{{ dataset_category }}</option>
        {% endfor %}
      </select>
    </div>
  </div>

  <div class="form-group control-medium">
    <label class="control-label" for="field-refresh_rate"><span class="text-danger">* </span>Refresh Rate</label>
    <div class="controls">
      <select id="field-refresh_rate" name="refresh_rate" data-module="autocomplete">
        {% for refresh_rate in refresh_rates %}
          <option value="{{ refresh_rate }}" {% if refresh_rate in data.get('refresh_rate', []) %}selected="selected"{% endif %}>{{ refresh_rate }}</option>
        {% endfor %}
      </select>
    </div>
  </div>

  <div class="form-group control-medium">
    <label class="control-label" for="field-is_retired"><span class="text-danger">* </span>Retired Dataset</label>
    <div class="controls">
      <select id="field-is_retired" name="is_retired" data-module="autocomplete">
        <option value="false" {% if data.get('is_retired', false) %}selected="selected"{% endif %}>False</option>
        <option value="true" {% if data.get('is_retired', false) %}selected="selected"{% endif %}>True</option>
      </select>
    </div>
  </div>

  <div class="control-group">
    <label class="control-label" for="field-country_code">{{ _("Country Code") }}</label>
    <div class="controls">
      <select id="field-country_code" name="country_code" data-module="autocomplete">
        {% for country_code in h.country_codes()  %}
          <option value="{{ country_code }}" {% if country_code in data.get('country_code', []) %}selected="selected"{% endif %}>{{ country_code }}</option>
        {% endfor %}
      </select>
    </div>
  </div>

  <div class="form-group control-medium">
    <label class="control-label" for="field-collection_method">Collection Method</label>
    <div class="controls">
      <textarea id="field-collection_method" name="collection_method" cols="20" rows="5" placeholder="This dataset was collected by..." class="form-control">{{ data.get('collection_method', '') or '' }}</textarea>
    </div>
  </div>

  <div class="form-group control-medium">
    <label class="control-label" for="field-excerpt">Excerpt</label>
    <div class="controls"><textarea id="field-excerpt" name="excerpt" cols="20" rows="5" placeholder="A short blurb about the dataset..." class="form-control">{{ data.get('excerpt', '') or '' }}</textarea>
    </div>
  </div>

  <div class="form-group control-medium">
    <label class="control-label" for="field-limitations">Limitations</label>
    <div class="controls">
      <textarea id="field-limitations" name="limitations" cols="20" rows="5" placeholder="This dataset is missing values from..." class="form-control">{{ data.get('limitations', '') or '' }}</textarea>
    </div>
  </div>

  <hr/>

  <h2 class="text-info">Owner Information</h2>

  <div class="form-group control-medium">
    <label class="control-label" for="field-owner_division"><span class="text-danger">* </span>Owner Division</label>
    <div class="controls">
      <select id="field-refresh_rate" name="owner_division" data-module="autocomplete">
        {% for owner_division in owner_divisions %}
          <option value="{{ owner_division }}" {% if owner_division in data.get('owner_division', []) %}selected="selected"{% endif %}>{{ owner_division }}</option>
        {% endfor %}
      </select>
    </div>
  </div>

  {{ form.input('owner_section', label=_('Owner Section'), id='field-owner_section', placeholder=_('eg. Traffic Management Centre'), value=data.owner_section, error=errors.owner_section, classes=['control-medium']) }}

  {{ form.input('owner_unit', label=_('Owner Unit'), id='field-owner_unit', placeholder=_('eg. Traffic Safety Unit'), value=data.owner_unit, error=errors.owner_unit, classes=['control-medium']) }}

  {{ form.input('owner_email', label=_('Owner Email'), id='field-owner_email', placeholder=_('eg. opendata@toronto.ca'), value=data.owner_email, error=errors.owner_email, classes=['control-medium']) }}

  <hr/>

  <h2 class="text-info">WordPress Filters</h2>

  {% set civic_issues_attrs = {'data-module': 'autocomplete', 'data-module-tags': '', 'data-module-source': '/tags_autocomplete?vocabulary_id=civic_issues&incomplete=?'} %}
  {{ form.input('civic_issues', id='field-civic_issues', label=_('Civic Issues'), placeholder=_('eg. Climate change'), value=data.civic_issues, error=errors.civic_issues, classes=['control-full'], attrs=civic_issues_attrs) }}

  {{ form.hidden('formats', value=data.formats) }}

  {% set topics_attrs = {'data-module': 'autocomplete', 'data-module-tags': '', 'data-module-source': '/tags_autocomplete?vocabulary_id=topics&incomplete=?'} %}
  {{ form.input('topics', id='field-topics', label=_('Topics'), placeholder=_('eg. Water, City government'), value=data.topics, error=errors.topics, classes=['control-full'], attrs=topics_attrs) }}

  <hr/>

  <h2 class="text-info">Others</h2>

  {{ form.input('information_url', label=_('Information URL'), id='field-information_url', placeholder=_('eg. http://www.toronto.ca/rescu/index.htm'), value=data.information_url, error=errors.information_url, classes=['control-medium']) }}

  {{ form.input('image_url', label=_('Image URL'), id='field-image_url', placeholder=_('eg. /wp-content/image/1.png'), value=data.image_url, error=errors.image_url, classes=['control-medium']) }}

  <hr/>

  <h2 class="text-info">Built-In Fields</h2>

{% endblock %}
